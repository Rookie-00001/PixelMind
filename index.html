<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <!-- 预加载字体文件以提高性能 -->
    <link rel="preload" href="fonts/zpix.ttf" as="font" type="font/ttf" crossorigin>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PixelMind 专注空间</title>
    <link rel="icon" href="icons/logo.svg" type="image/svg+xml">
    
    <!-- 保留 Google Fonts 引用作为备用 -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    
    <!-- CSS 引用 - 注意顺序 -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/controls.css">
    <link rel="stylesheet" href="css/scenes.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/fonts.css"> <!-- 确保 fonts.css 在 responsive.css 之前 -->
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/font-toggle.css">
</head>
<body>
    <!-- 导航栏 -->
    <div class="navbar">
        <div class="navbar-title">
            <img src="icons/logo.svg" alt="PixelMind Logo" class="navbar-logo">
            PixelMind 专注空间
        </div>
        <div class="navbar-links">
            <button class="navbar-link" id="home-btn" title="首页">
                <img src="icons/home.svg" alt="首页" class="navbar-icon">
            </button>
            <button class="navbar-link" id="background-btn" title="背景色">
                <img src="icons/bkg.svg" alt="背景" class="navbar-icon">
            </button>
            <button class="navbar-link" id="theme-btn" title="白天/暗黑">
                <img src="icons/moon.svg" alt="明亮/暗黑" class="navbar-icon">
            </button>
            <button class="navbar-link" id="github-btn" title="GitHub">
                <img src="icons/github.svg" alt="GitHub" class="navbar-icon">
            </button>
        </div>
    </div>
    
    <div class="main-container">
        <div class="container">
            <!-- 左侧场景画 -->
            <div class="scene-container">
                <!-- 全屏按钮 -->
                <button class="fullscreen-button" id="fullscreen-btn">
                    <svg class="fullscreen-icon" viewBox="0 0 24 24">
                        <path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/>
                    </svg>
                </button>
                
                <!-- 预设场景 - 替换图片为视频和添加新场景 -->
                <!-- 视频场景 -->
                <video id="scene-sao" src="images/videos/sao.mp4" class="scene active" autoplay loop muted></video>
                <video id="scene-dilao" src="images/videos/dilao.mp4" class="scene" autoplay loop muted></video>
                <video id="scene-nature" src="images/videos/nature.mp4" class="scene" autoplay loop muted></video>
                <video id="scene-night" src="images/videos/night.mp4" class="scene" autoplay loop muted></video>

                <!-- 图片场景 -->
                <img id="scene-forest" src="images/scenes/forest.png" class="scene" alt="Forest">
                <img id="scene-city" src="images/scenes/city.png" class="scene" alt="City">
                <img id="scene-city2" src="images/scenes/city2.png" class="scene" alt="City 2">
                <img id="scene-book" src="images/scenes/book.png" class="scene" alt="Book">
                <img id="scene-jiuguan" src="images/scenes/jiuguan.png" class="scene" alt="Jiuguan">
                <img id="scene-jiuguan2" src="images/scenes/jiuguan2.png" class="scene" alt="Jiuguan 2">
                <img id="scene-jiuguan3" src="images/scenes/jiuguan3.png" class="scene" alt="Jiuguan 3">
                <img id="scene-BOSS" src="images/scenes/boss.png" class="scene" alt="Boss">
                <img id="scene-BOSS2" src="images/scenes/boss2.png" class="scene" alt="Boss 2">
                <img id="scene-jingling" src="images/scenes/jingling.png" class="scene" alt="Jingling">
                <img id="scene-night2" src="images/scenes/night.png" class="scene" alt="Night 2">
                
                <!-- 用户上传图片/视频容器 -->
                <div class="user-image-container">
                    <img class="user-image" alt="User uploaded image">
                </div>
                <div class="user-video-container">
                    <video class="media-element" autoplay loop muted style="width: 100%; height: 100%; object-fit: cover;"></video>
                </div>
            </div>
            
            <!-- 右侧控制按钮 -->
            <div class="controls">
                <button id="play-pause" class="control-button">
                    <span class="status-indicator status-off"></span>
                    播放
                </button>
                
                <div class="slider-container">
                    <label for="volume">音量</label>
                    <input type="range" id="volume" class="volume-slider" min="0" max="100" value="50">
                </div>
                
            <!-- 专注计时器 -->
            <div class="focus-timer">
                <div class="timer-display">25:00</div>
                <div class="timer-slider">
                    <input type="range" id="timer-range" min="0" max="120" value="25" step="1">
                </div>
                <div class="timer-controls">
                    <button id="timer-reset" class="timer-button">
                        <!-- 使用内联 SVG 代替 img 标签 -->
                        <svg class="timer-icon" viewBox="0 0 24 24">
                            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/>
                        </svg>
                    </button>
                </div>
            </div>

                <button id="scene-button" class="control-button">
                    <div class="current-scene">场景</div>
                </button>
                
                <div class="sound-selector">
                    <button id="sound-button" class="control-button">
                        <div class="current-sound">声音</div>
                    </button>
                </div>
                
                <button id="settings-button" class="control-button">设置</button>
            </div>
        </div>
    </div>
    
    <!-- 退出全屏按钮 -->
    <button class="exit-fullscreen-button" id="exit-fullscreen-btn">
        <svg class="exit-fullscreen-icon" viewBox="0 0 24 24">
            <path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/>
        </svg>
    </button>
    
    <!-- 场景选择下拉菜单 -->
    <div class="scenes-dropdown">
        <div class="scene-option" data-scene="scene-sao">刀剑神域</div>
        <div class="scene-option" data-scene="scene-dilao">地牢</div>
        <div class="scene-option" data-scene="scene-nature">自然风光</div>
        <div class="scene-option" data-scene="scene-night">夜晚</div>
        <div class="scene-option" data-scene="scene-night2">夜晚2</div>
        <div class="scene-option" data-scene="scene-forest">森林探险</div>
        <div class="scene-option" data-scene="scene-jingling">精灵森林</div>
        <div class="scene-option" data-scene="scene-city">初始城市</div>
        <div class="scene-option" data-scene="scene-city2">初始城市2</div>
        <div class="scene-option" data-scene="scene-book">书房微雨</div>
        <div class="scene-option" data-scene="scene-jiuguan">酒馆</div>
        <div class="scene-option" data-scene="scene-jiuguan2">酒馆2</div>
        <div class="scene-option" data-scene="scene-jiuguan3">酒馆3</div>
        <div class="scene-option" data-scene="scene-BOSS">BOSS战</div>
        <div class="scene-option" data-scene="scene-BOSS2">BOSS战2</div>
        <!-- 用户自定义场景会动态添加到这里 -->
    </div>

    <!-- 声音选择下拉菜单 -->
    <div class="sound-dropdown">
        <div class="sound-option" data-sound="nosiy">白噪音</div>
        <div class="sound-option" data-sound="rain">雨声</div>
        <div class="sound-option" data-sound="forest">森林</div>
        <div class="sound-option" data-sound="coffee">酒馆</div>
        <div class="sound-option" data-sound="fire">篝火</div>
        <div class="sound-option" data-sound="swim">海浪</div>
        <div class="sound-option" data-sound="city">城市</div>
        <div class="sound-option" data-sound="keyboard">键盘声</div>
        <div class="sound-option" data-sound="wind">风声</div>
        <div class="sound-option" data-sound="boss">BOSS战</div>
        <div class="sound-option" data-sound="night">夜晚</div>
    </div>
    
    <!-- 设置模态窗口 -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">设置</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="settings-option">
                <label for="animation-speed">动画速度 <span id="speed-display">1.00x</span></label>
                <input type="range" id="animation-speed" min="1" max="5" value="3">
            </div>
            <div class="settings-option">
                <label for="pixel-font-toggle">像素字体</label>
                <div class="toggle-switch">
                    <input type="checkbox" id="pixel-font-toggle" checked>
                    <span class="toggle-slider"></span>
                </div>
            </div>
            <div class="settings-option">
                <label for="aspect-ratio">场景比例</label>
                <div class="aspect-ratio-selector">
                    <div class="aspect-ratio-option active" data-ratio="16:10">16:10</div>
                    <div class="aspect-ratio-option" data-ratio="16:9">16:9</div>
                    <div class="aspect-ratio-option" data-ratio="4:3">4:3</div>
                    <div class="aspect-ratio-option" data-ratio="1:1">1:1</div>
                </div>
            </div>
            <div class="upload-container">
                <p>上传自定义图片</p>
                <label for="upload-image" class="upload-label">选择文件</label>
                <input type="file" id="upload-image" accept="image/*">
            </div>
            <div class="upload-container">
                <p>上传自定义视频</p>
                <label for="upload-video" class="upload-label">选择文件</label>
                <input type="file" id="upload-video" accept="video/*">
            </div>
            
            <!-- 用户上传文件列表 -->
            <div class="user-files-container" id="user-files-container">
                <div class="user-files-title">已上传文件</div>
                <div class="user-files-list" id="user-files-list">
                    <!-- 用户文件项会动态添加到这里 -->
                    <div class="no-files" id="no-files-message">暂无上传文件</div>
                </div>
            </div>
            
            <div class="color-picker-container">
                <label for="custom-color">自定义背景颜色</label>
                <div class="theme-buttons">
                    <div class="theme-button theme-white" data-theme="white" data-tooltip="白色"></div>
                    <div class="theme-button theme-dark" data-theme="dark" data-tooltip="暗黑"></div>
                    <div class="theme-button theme-silver" data-theme="silver" data-tooltip="银灰"></div>
                    <div class="theme-button theme-wood" data-theme="wood" data-tooltip="木色"></div>
                    <div class="theme-button theme-green" data-theme="green" data-tooltip="绿叶"></div>
                    <div class="theme-button theme-pixel" data-theme="pixel" data-tooltip="像素"></div>
                    <div class="theme-button theme-retro active" data-theme="retro" data-tooltip="复古"></div>
                    <div class="theme-button theme-custom" data-theme="custom" data-tooltip="自定义颜色"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 背景设置模态窗口 -->
    <div id="background-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">背景设置</h2>
                <button class="close-button">&times;</button>
            </div>
            <div class="color-picker-container">
                <label for="custom-color">选择背景颜色</label>
                <div class="theme-buttons">
                    <div class="theme-button theme-white" data-theme="white" data-tooltip="白色"></div>
                    <div class="theme-button theme-dark" data-theme="dark" data-tooltip="暗黑"></div>
                    <div class="theme-button theme-silver" data-theme="silver" data-tooltip="银灰"></div>
                    <div class="theme-button theme-wood" data-theme="wood" data-tooltip="木色"></div>
                    <div class="theme-button theme-green" data-theme="green" data-tooltip="绿叶"></div>
                    <div class="theme-button theme-pixel active" data-theme="pixel" data-tooltip="像素"></div>
                    <div class="theme-button theme-retro" data-theme="retro" data-tooltip="复古"></div>
                    <div class="theme-button theme-custom" data-theme="custom" data-tooltip="自定义颜色"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- 颜色选择器模态窗口 -->
    <div id="color-picker-modal" class="color-picker-modal">
        <div class="color-picker-content">
            <div class="color-picker-title">选择自定义颜色</div>
            <input type="color" id="color-picker" class="color-picker" value="#ffffff">
            <button id="apply-color" class="color-picker-button">应用颜色</button>
        </div>
    </div>

    <!-- 页脚信息 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-description">
                PixelMind 专注空间 - 一个帮助您集中注意力的白噪音放松工具，提供多种独特场景和声音选择。
            </div>
            <div class="footer-author">
                由LjhaiDj开发 | 设计：LjhaiDj Design | 音效：Net Resources
            </div>
            <div class="footer-copyright">
                © 2025 PixelMind 专注空间 | 保留所有权利 | 版本号：v1.0.1
            </div>
            <div class="footer-disclaimer">
                部分内容来源于网络，如有侵权联系删除
            </div>
        </div>
    </footer>

    <!-- JavaScript 引用 -->
    <script src="js/utils.js"></script>
    <script src="js/audio.js"></script>
    <script src="js/timer.js"></script>
    <script src="js/scenes.js"></script>
    <script src="js/themes.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
